var app_base_url=location.protocol+"//app.turtlemint.com";function setCookie(e,t,r,a){var n=new Date;a||(a=1),n.setTime(n.getTime()+24*a*60*60*1e3);var o="expires="+n.toUTCString();document.cookie=e+"="+t+";"+o+";path=/;Domain="+r}function getUrlVars(){for(var e,t=[],r=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),a=0;a<r.length;a++)e=r[a].split("="),t.push(e[0]),t[e[0]]=e[1];return t}function addparams(e){var t=$('input[name="regNumber"]').val().toUpperCase(),r=e;r=(r=r.replace("%3F","?")).replace("%3D","&");var a=location.search;if(r.indexOf("?")>-1&&(a=a.replace("?","&")),""==a)var n=r+a+"?regNumber="+t;else n=r+a+"&regNumber="+t;n=(n=n.replace("%3F","?")).replace("%3D","&"),window.location.href=n}function checkSteps(e){if(e.checked){$(e).parents(".step").find(".tm-message").slideUp(),setTimeout((function(){$(e).parents(".step").find(".tm-message").removeClass("tm-error")}),1e3),$(e).next(".radio-button").addClass("tm-sprite-3-before bg-checkmark-green"),$(e).parents(".tm-radio-vertical").addClass("checked"),$("#tm-select-insurance").find(".tm-radio-vertical input[type='radio']").not(e).next(".radio-button").removeClass("tm-sprite-3-before bg-checkmark-green"),$("#tm-select-insurance").find(".tm-radio-vertical input[type='radio']").not(e).parents(".tm-radio-vertical").removeClass("checked"),$(e).parents(".step").removeClass("current"),$(e).parents(".step").addClass("complete").find(".step__head .step-number").addClass("tm-sprite-3-before bg-checkmark-green"),$(e).parents(".step").next(".step").addClass("current");let t=$(e).parents(".step").next(".step").find(".tm-button");$(t).hasClass("button-pulse")?($(t).removeClass("button-pulse"),setTimeout((function(){$(t).addClass("button-pulse")}),1e3)):$(t).addClass("button-pulse"),$(e).parents(".step").hasClass("error")&&$(e).parents(".step").removeClass("error")}}window.onload=function(){getUrlVars().utm_source,getUrlVars().utm_medium,getUrlVars().utm_campaign,getUrlVars().referrer,getUrlVars().gclid};let checkedVerticalRadioButton=$("input[name=vertical]:checked",".tm-radio-verticals");function appVerticalRedirection(e,t){if(t)switch(e){case"FW":addparams(app_base_url+"/car-insurance/car-profile");break;case"TW":addparams(app_base_url+"/two-wheeler-insurance/two-wheeler-profile");break;case"CV":addparams(app_base_url+"/two-wheeler-insurance/two-wheeler-profile");break;default:}else switch(e){case"FW":window.location.href=app_base_url+"/car-insurance/car-profile";break;case"TW":window.location.href=app_base_url+"/two-wheeler-insurance/two-wheeler-profile";break;case"CV":window.location.href="/two-wheeler-insurance/two-wheeler-profile";break;case"Health":window.location.href=app_base_url+"/health-insurance/health-profile/profile-gender";break;case"Life":window.location.href=app_base_url+"/life-insurance/profile/term/about-insured";break;default:}}function verticalRedirect(e,t,r){let a,n=$(t).text();if($(t).parents(".step").hasClass("current")?a=$(t).parents(".step").prev(".step").find(".tm-radio-vertical.checked input[type=radio]").val():($(t).parents(".step").prev(".step").addClass("error"),$(t).parents(".step").prev(".step").find(".tm-message").addClass("tm-error").text("Please select type of insurance to proceed to the next step").slideDown(),gtag("event","HP-Message-Not_selected",{event_category:"HP-Error",event_label:"Please select type of insurance to proceed to the next step"})),"redirect"==e){a&&n&&gtag("event","Btn_click-"+a+"-"+n,{event_category:"HP-Buttons",event_label:n});let e="#";if(""!=a)switch(a){case"Health":e="https://app.turtlemint.com/health-insurance/health-profile/profile-gender";break;case"Life":e=base_url+"/life-insurance/";break;case"TW":e="https://app.turtlemint.com/two-wheeler-insurance/two-wheeler-profile/tw-registration-info";break;case"FW":e="https://app.turtlemint.com/car-insurance/car-profile/car-registration-info";break}r&&(gtag("event","Btn_click-"+n,{event_category:r+"_VP-Buttons",event_label:n}),appVerticalRedirection(r)),window.location.href=e}else if(r&&"redirect"!=e){gtag("event","Btn_click-"+n,{event_category:r+"_VP-Buttons",event_label:n});let e=base_url+"/insurance-advisor-near-me/?vertical="+r;window.location.href=e}else"findAdvisor"==e&&!r&&a&&(gtag("event","Btn_click-"+a+"-"+n,{event_category:"HP-Buttons",event_label:n}),$("#tm-select-insurance").submit())}function getVertical(){let e="";return location.pathname.indexOf("car")>-1?e="FW":location.pathname.indexOf("two-wheeler-insurance")>-1||location.pathname.indexOf("bike-insurance")>-1?e="TW":location.pathname.indexOf("commercial-vehicle")>-1?e="CV":location.pathname.indexOf("health-insurance")>-1?e="Health":location.pathname.indexOf("life-insurance")>-1&&(e="Life"),e}function isValidRegNo(e){return/^[A-Za-z]{2}[-]?[0-9]{1,2}[-]?([A-Za-z]{0,3})[-]?[0-9]{4}$/.test(e)}checkedVerticalRadioButton[0]&&checkSteps(checkedVerticalRadioButton[0]),$(".tm-radio-vertical input[type='radio']").change((function(){checkSteps(this)}));var setItemSession=function(e,t,r){var a=window.sessionStorage.getItem(e),n=a?JSON.parse(a):{};n[t]=r;var o=JSON.stringify(n);window.sessionStorage.setItem(e,o)};function goToProfile(e,t,r){setItemSession(e,"regNoView",t),t&&setItemSession(e,"premiumRequest",{}),e&&r?appVerticalRedirection(e,r):appVerticalRedirection(e)}function showError(e,t){let r=$(e).parents(".tm-field").addClass("error").find(".tm-message");$(r).text(t).addClass("tm-error").slideDown()}function showSuccess(e,t){let r=$(e).parents(".tm-field").removeClass("error").find(".tm-message");$(r).text(t).slideUp()}function isNumber(e){var t=(e=e||window.event).which?e.which:e.keyCode;return!(t>31&&(t<48||t>57))}function getAQuote(e){let t=getVertical(),r=$(e).val().toUpperCase(),a=e.closest("form").id;if(isValidRegNo(r)){if(window.localStorage.setItem(t+"registrationNo",r),window.sessionStorage.setItem(t+"registrationNo",r),setCookie("data",r,".turtlemint.com",null),"FW"==t&&dataLayer.push({event:"Registration Info",Product:"Four-Wheeler Insurance",Registeration_Number:r}),"TW"==t&&dataLayer.push({event:"Registration Info",Product:"Two-Wheeler Insurance",Registeration_Number:r}),"get-a-quote-form"==a&&t&&gtag("event","Btn_click-Get a Quote",{event_category:t+"_VP-Buttons",event_label:"Get a Quote"}),"get-a-quote-form-2"==a||"get-a-quote-form-3"==a){let e=document.getElementById(a);if(e){let t=e.querySelector(".get-quote-cta");t&&tmClickEventData(t)}}goToProfile(t,!0,r)}else"FW"==t&&(window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"errorMessage",Error_Message:"Registration number is incorrect",Error_URL:"https://www.turtlemint.com/car-insurance"}),gtag("event",t+"-Message-No_Input-RN",{event_category:t+"_VP-error",event_label:"Please enter complete registration number"})),"TW"==t&&(window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"errorMessage",Error_Message:"Registration number is incorrect",Error_URL:"https://www.turtlemint.com/two-wheeler-insurance/"}),gtag("event",t+"-Message-No_Input-RN",{event_category:t+"_VP-error",event_label:"Enter valid registration number"})),showError(e,"Enter valid registration number")}function isValidPincode(e){return/^[1-9]{1}[0-9]{2}[0-9]{3}$/.test(e)}let getAQuoteForms=document.querySelectorAll(".get-a-quote-form");getAQuoteForms&&getAQuoteForms.forEach((e=>{e.addEventListener("submit",(async t=>{t.preventDefault();let r=e.querySelector("#regNumber");""==r.value?showError(r,"Enter valid registration number"):getAQuote(r)}))}));let findAdvisorForm=document.getElementById("find-advisor-form");findAdvisorForm&&findAdvisorForm.addEventListener("submit",(async e=>{e.preventDefault();let t=document.getElementById("find-advisor-pincode");if(""==t.value)showError(t,"Please enter the pincode");else if(isValidPincode(t.value)){showSuccess(t);let e=getVertical();sessionStorage.setItem("tm_vertical_data",e);let r=await getPincodeLocation(t.value);r.error?(showError(t,r.info),gtag("event",e+"-Message-No_Input-Pincode",{event_category:e+"_VP-error",event_label:"No pincode found-"+t})):(showSuccess(t),gtag("event","Btn_click-Find Advisor",{event_category:e+"_VP-Buttons",event_label:"Find Advisor"}),$(findAdvisorForm).submit())}else showError(t,"Please enter the valid pincode")}));